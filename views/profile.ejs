<%- include('partials/header') %>

<div class="container">
  <!-- Profile Header -->
  <div class="profile-header-section">
    <div class="profile-header-content">
      <div class="profile-avatar-large">
        <i class="fas fa-user-secret"></i>
      </div>
      <div class="profile-info">
        <h1><%= user.displayName %></h1>
        <p class="profile-email"><%= user.email %></p>
        <p class="profile-joined">
          Member since <%= new Date(user.createdAt).toLocaleDateString('en-US', { 
            year: 'numeric',
            month: 'long', 
            day: 'numeric'
          }) %>
        </p>
      </div>
    </div>
    <div class="profile-actions-header">
      <a href="/confessions/new" class="btn btn-primary">
        <i class="fas fa-plus"></i>
        New Confession
      </a>
      <a href="/confessions/history" class="btn btn-secondary">
        <i class="fas fa-history"></i>
        History
      </a>
    </div>
  </div>

  <!-- Stats Overview -->
  <div class="stats-section">
    <h2 class="section-title">Activity Overview</h2>
    <div class="stats-grid-modern">
      <div class="stat-card-modern">
        <div class="stat-card-header">
          <div class="stat-icon-modern blue">
            <i class="fas fa-comment-dots"></i>
          </div>
          <span class="stat-label">Confessions</span>
        </div>
        <div class="stat-value"><%= userConfessions %></div>
        <div class="stat-change">Total posted</div>
      </div>

      <div class="stat-card-modern">
        <div class="stat-card-header">
          <div class="stat-icon-modern purple">
            <i class="fas fa-heart"></i>
          </div>
          <span class="stat-label">Total Reactions</span>
        </div>
        <div class="stat-value"><%= stats.totalLikes + stats.totalLoves + stats.totalLaughs %></div>
        <div class="stat-change">All time</div>
      </div>

      <div class="stat-card-modern">
        <div class="stat-card-header">
          <div class="stat-icon-modern green">
            <i class="fas fa-chart-line"></i>
          </div>
          <span class="stat-label">Avg per Post</span>
        </div>
        <div class="stat-value"><%= userConfessions > 0 ? Math.round((stats.totalLikes + stats.totalLoves + stats.totalLaughs) / userConfessions * 10) / 10 : 0 %></div>
        <div class="stat-change">Reactions</div>
      </div>

      <div class="stat-card-modern">
        <div class="stat-card-header">
          <div class="stat-icon-modern orange">
            <i class="fas fa-fire"></i>
          </div>
          <span class="stat-label">Engagement</span>
        </div>
        <div class="stat-value"><%= userConfessions > 0 ? Math.round((stats.totalLikes + stats.totalLoves + stats.totalLaughs) / userConfessions * 100) : 0 %>%</div>
        <div class="stat-change">Rate</div>
      </div>
    </div>
  </div>

  <!-- Reaction Breakdown -->
  <div class="breakdown-section">
    <h2 class="section-title">Reaction Breakdown</h2>
    <div class="breakdown-grid">
      <div class="breakdown-card">
        <div class="breakdown-icon">
          <i class="fas fa-thumbs-up"></i>
        </div>
        <div class="breakdown-content">
          <div class="breakdown-value"><%= stats.totalLikes %></div>
          <div class="breakdown-label">Likes</div>
          <div class="breakdown-bar">
            <div class="breakdown-bar-fill" style="width: <%= (stats.totalLikes / Math.max(stats.totalLikes + stats.totalLoves + stats.totalLaughs, 1)) * 100 %>%"></div>
          </div>
        </div>
      </div>

      <div class="breakdown-card">
        <div class="breakdown-icon love">
          <i class="fas fa-heart"></i>
        </div>
        <div class="breakdown-content">
          <div class="breakdown-value"><%= stats.totalLoves %></div>
          <div class="breakdown-label">Loves</div>
          <div class="breakdown-bar">
            <div class="breakdown-bar-fill love" style="width: <%= (stats.totalLoves / Math.max(stats.totalLikes + stats.totalLoves + stats.totalLaughs, 1)) * 100 %>%"></div>
          </div>
        </div>
      </div>

      <div class="breakdown-card">
        <div class="breakdown-icon laugh">
          <i class="fas fa-laugh"></i>
        </div>
        <div class="breakdown-content">
          <div class="breakdown-value"><%= stats.totalLaughs %></div>
          <div class="breakdown-label">Laughs</div>
          <div class="breakdown-bar">
            <div class="breakdown-bar-fill laugh" style="width: <%= (stats.totalLaughs / Math.max(stats.totalLikes + stats.totalLoves + stats.totalLaughs, 1)) * 100 %>%"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Privacy Info -->
  <div class="info-section-modern">
    <h2 class="section-title">Privacy & Security</h2>
    <div class="info-cards">
      <div class="info-card-modern">
        <div class="info-card-icon">
          <i class="fas fa-user-secret"></i>
        </div>
        <div class="info-card-content">
          <h3>Anonymous Posting</h3>
          <p>Your confessions are completely anonymous to other users. Your identity is never revealed.</p>
        </div>
      </div>

      <div class="info-card-modern">
        <div class="info-card-icon">
          <i class="fas fa-lock"></i>
        </div>
        <div class="info-card-content">
          <h3>Secret Code Protection</h3>
          <p>Only you can edit or delete your confessions using your unique secret code.</p>
        </div>
      </div>

      <div class="info-card-modern">
        <div class="info-card-icon">
          <i class="fas fa-shield-alt"></i>
        </div>
        <div class="info-card-content">
          <h3>Secure Authentication</h3>
          <p>Your account is protected by Google OAuth 2.0 authentication system.</p>
        </div>
      </div>
    </div>
  </div>
</div>

<%- include('partials/footer') %>
